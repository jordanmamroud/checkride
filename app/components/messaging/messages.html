<div layout="row" layout-align="center start" layout-fill>

	<sidenav flex="25">
		<!-- Conversation List -->
		
		<md-toolbar class="md-primary" >
			<div class="md-toolbar-tools">
				<span class="pc-capitalize">Messages</span>
			</div>
		</md-toolbar>

		<md-content>
			<md-list>
				<md-list-item 
					ng-class="{setColor: convo.hasNewMsg === true}" 
					ng-click="msg.viewConvoMessages(convo)" 
					class="md-3-line" 
					ng-repeat="convo in msg.conversationsList | orderBy:'-lastMsg'"
					ng-click="null">
					<div class="md-list-item-text" layout="column">
						<h3 class="pc-capitalize" >{{convo.users.name}}</h3>
					</div>
				</md-list-item>
			</md-list>
		</md-content>
		
		<md-button class="md-raised md-primary" flex ng-click="msg.openConvoDialog()" style="text-align:center;"> New Conversation </md-button>

	</sidenav>

	<md-divider></md-divider>


	<!-- Message List -->
	<div layout="column" flex ng-show="msg.convoInfo != undefined">

		<md-toolbar layout-gt-xs="row" >
			<div class="md-toolbar-tools">
				<span class="pc-capitalize">{{msg.convoInfo.users.name}}</span>
			</div>
		</md-toolbar>



		<md-content layout-gt-xs="row" layout-padding>
			<md-list layout="column" flex>
				<md-list-item class="md-3-line" ng-repeat="cv in msg.convoMessages" flex>
					<div class="md-list-item-text pc-message">
						<div class="pc-msg-wrapper" ng-class="(cv.sender === msg.userName) ? 'me' : 'them'">
							<div class="pc-msg-body">
								<h3>{{cv.body}}</h3>
								<p class="pc-capitalize pc-msg-sender">{{cv.sender === msg.userName ? "Me" : cv.sender}}</p>
							</div>
							<i ng-click="msg.delete(cv)" class="material-icons">clear</i>

						</div>
						<div ng-show="{{cv.sentAt != null}}" class="pc-msg-time">{{cv.sentAt | date:'short'}}</div>
						
					</div>
				</md-list-item>
			</md-list>
		</md-content>


		<div md-colors="::{backgroundColor: 'default-background-300'}" layout layout-padding layout-align="center center">
			<md-input-container flex="80" flex-offset="5">
				<textarea id="message" rows="1" placeholder="Message..." flex ng-model="msg.body"></textarea>
			</md-input-container>
			<md-input-container flex>
				<md-button ng-click="msg.sendReply()" class="md-raised md-primary">Reply</md-button>			
			</md-input-container>
		</div>
	</div>

	

</div>